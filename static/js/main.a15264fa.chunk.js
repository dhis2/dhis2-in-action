(this["webpackJsonpdhis2-in-action"]=this["webpackJsonpdhis2-in-action"]||[]).push([[0],{147:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},162:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},166:function(e,t,a){},167:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);a(84),a(97),a(109),a(126),a(132),a(134),a(135);var n=a(0),r=a.n(n),o=a(29),l=a.n(o),c=(a(146),a(147),a(75)),i=a.n(c);a(151);var s=e=>{let{children:t}=e;const[a,o]=Object(n.useState)(!1);return r.a.createElement(i.a,{enabled:a,onChange:o},t,r.a.createElement("div",{className:"Fullscreen Fullscreen-".concat(a?"en":"dis","abled"),onClick:()=>o(!a)}))},u=a(76),d=a.n(u);const m=[{id:"all",group:"explore",title:"Where is DHIS2 used?",legend:[{code:"_",name:"All countries",color:"#0080d4"}],hasChart:!1},{id:"health",group:"country-owned",title:"Health",legend:[{code:"s",name:"National",color:"#238443"},{code:"p",name:"Subnational",color:"#d9f0a3"}],hasChart:!0},{id:"disease",group:"country-owned",title:"Disease Surveillance",legend:[{code:"d",name:"National surveillance system",color:"#e34a33"}],hasChart:!1},{id:"covid-19",group:"country-owned",title:"COVID-19",legend:[{code:"y",name:"Surveillance & Vaccine",color:"#a63603"},{code:"c",name:"Surveillance only",color:"#fd8d3c"},{code:"x",name:"Vaccine only",color:"#fdd0a2"}],hasChart:!1},{id:"climate",group:"country-owned",title:"Climate",legend:[{code:"w",name:"Systems using climate data",color:"#008080"}],hasChart:!1},{id:"logistics",group:"country-owned",title:"Logistics",legend:[{code:"l",name:"DHIS2 for Logistics",color:"#808000"}],hasChart:!1},{id:"tracker",group:"country-owned",title:"Tracker",legend:[{code:"t",name:"Tracker",color:"#e34a33"}],hasChart:!0,legacy:!0},{id:"android",group:"country-owned",title:"Android app",legend:[{code:"a",name:"Android app",color:"#2ca25f"}],hasChart:!0,legacy:!0},{id:"emis",group:"country-owned",title:"Education",legend:[{code:"e",name:"DHIS2 for Education",color:"#ae017e"}],hasChart:!1},{id:"other",group:"country-owned",title:"Other sectors",legend:[{code:"o",name:"DHIS2 in other sectors",color:"#ff7f00"}],hasChart:!1},{id:"projects",group:"other",title:"Projects using DHIS2",legend:[{code:"n",name:"Non-governmental systems",color:"#ffe119"}],hasChart:!1}],g={explore:"Explore the map","country-owned":"Country-owned systems",other:"NGO and other systems"},f=m.filter(e=>!e.legacy).map(e=>e.id),p=m.filter(e=>e.legacy).map(e=>e.id),h=m.flatMap(e=>e.legend).filter(e=>e.code).reduce((e,t)=>{let{code:a}=t;return{...e,[a]:0}},{}),y=/^Y\d{4}$/,E=(e,t)=>{const a=e[0],n=a.indexOf("Code"),r=a.indexOf("Name"),o=a.filter(e=>e.match(y)).map(e=>e.substring(1)),l=o[o.length-1],c=e.slice(1),i={},s={};let u=!1;return c.forEach(e=>{const l=e[n],c=e[r];if(l||(u=!0),l&&!u){const n=i[l]={name:c};o.forEach(r=>{let o=e[a.indexOf("Y".concat(r))];t||(o=(o||"").replace("t","").replace("a","")),o&&o.length&&(n[r]=o,s[r]||(s[r]={...h}),s[r]._++,o.split("").forEach(e=>{s[r][e]++}))})}}),{countries:i,year:s,years:o,lastYear:l}},v=e=>{let{values:t}=e;return{current:E(t,!1),legacy:E(t,!0)}},b=e=>{let{values:t}=e;const a=t[0],n=t.slice(1),r=a.indexOf("Country code"),o=a.indexOf("Letter"),l=a.indexOf("Title"),c=a.indexOf("Body"),i=a.indexOf("Image url"),s=a.indexOf("Image link"),u=a.indexOf("YouTube ID"),d=a.indexOf("Read more link"),m={};return n.forEach(e=>{const t=e[r],a=e[o],n=e[l],g=e[c],f=e[i],p=e[s],h=e[u],y=e[d];m[t]||(m[t]={}),m[t][a]={title:n,body:g,imageurl:f,imagelink:p,youtubeid:h,readmorelink:y}}),m},C=e=>d()("https://sheets.googleapis.com/v4/spreadsheets/1GRqJrapEJ7HBnrsvcIA0PlTok1DfgRLng7S4XLODXS4/values/".concat(e,"?key=AIzaSyDWyCSemDgAxocSL7j9Dy4mi93xTTcPEek"),{jsonpCallback:"callback"}).then(e=>e.json()),O=Object(n.createContext)(),j=Object(n.createContext)(),k=Object(n.createContext)();var S=e=>{let{children:t}=e;const[a,o]=Object(n.useState)(),[l,c]=Object(n.useState)(),[i,s]=Object(n.useState)();return Object(n.useEffect)(()=>{fetch("./countries.json").then(e=>e.json()).then(o).catch(e=>console.log(e)),C("Country status per year").then(v).then(c)},[]),Object(n.useEffect)(()=>{l&&C("Country focus").then(b).then(s)},[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(O.Provider,{value:a},r.a.createElement(j.Provider,{value:l},r.a.createElement(k.Provider,{value:i},t))))};a(152);var x=e=>{let{items:t}=e;const a=Object(n.useContext)(O),o=Object(n.useContext)(j);return a&&o?null:r.a.createElement("div",{className:"mask"},r.a.createElement("div",{className:"loader"}))},w=a(77);a(157);var N=e=>{let{type:t,onClick:a}=e;return r.a.createElement("div",{className:"SidebarToggle SidebarToggle-".concat(t),onClick:a},"open"===t?r.a.createElement(r.a.Fragment,null,"Map options",r.a.createElement("span",null,">")):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"<"),"Close map options"))};a(158);var _=e=>{let{items:t}=e;const a=Object(n.useContext)(j),o=null===a||void 0===a?void 0:a.current,l=Object(n.useMemo)(()=>o?o.year[o.lastYear]:{},[o]);return r.a.createElement("div",{className:"Legend"},t.map(e=>{let{code:t,name:a,color:n}=e;return r.a.createElement("div",{key:n},r.a.createElement("span",{style:{backgroundColor:n}})," ",a,l[t]?" (".concat(l[t],")"):"")}))};a(159);var L=e=>{let{id:t,title:a,legend:n,selected:o,onClick:l}=e;return r.a.createElement("div",{onClick:()=>l(t),className:"Category".concat(o?" Category-selected":"")},r.a.createElement("h3",null,a),o&&r.a.createElement(_,{items:n}))};var F=e=>{let{group:t,category:a,onClick:n}=e;return r.a.createElement("div",null,r.a.createElement("h2",null,g[t]),m.filter(e=>e.group===t&&!e.legacy).map(e=>r.a.createElement(L,Object.assign({key:e.id,onClick:n,selected:a===e.id},e))))};var D=e=>{let{category:t,isDocked:a,onClose:n,onSelect:o}=e;return r.a.createElement(r.a.Fragment,null,!a&&r.a.createElement(N,{type:"close",onClick:n}),r.a.createElement("div",{className:"Sidebar-header"},r.a.createElement("h1",null,"DHIS2 in action"),r.a.createElement("p",null,"DHIS2 is in use all over the world. Check out different use cases with this interactive map.")),r.a.createElement(F,{group:"explore",onClick:o,category:t}),r.a.createElement(F,{group:"country-owned",onClick:o,category:t}),r.a.createElement(F,{group:"other",onClick:o,category:t}))};a(160);var M=e=>{let{category:t,onSelect:a,children:o}=e;const[l,c]=Object(n.useState)(!0),[i,s]=Object(n.useState)(!1);return Object(n.useEffect)(()=>{const e=window.matchMedia("(min-width: 700px)");e.addListener(()=>s(e.matches)),s(e.matches)},[]),f.includes(t)?r.a.createElement(w.a,{sidebar:r.a.createElement(D,{category:t,onSelect:a,isDocked:i,onClose:()=>c(!1)}),open:l,docked:i,onSetOpen:()=>c(!0),rootClassName:"App",contentClassName:"App-main",overlayClassName:"App-overlay",sidebarClassName:"Sidebar"},l&&!i&&r.a.createElement("div",{className:"App-mask",onClick:()=>c(!1)}),r.a.createElement("div",{style:{transition:"none"}},o),!l&&!i&&r.a.createElement(N,{type:"open",onClick:()=>c(!0)})):o},I=a(4),A=a.n(I),P=a(79);a(161),a(162);const T=Object(n.createContext)(),H=[[-50,-50],[65,155]];var W=e=>{let{children:t}=e;const[a,o]=Object(n.useState)(),l=Object(n.useRef)();return Object(n.useEffect)(()=>{const e=Object(I.map)(l.current,{crs:new P.CRS("ESRI:53009","+proj=moll +lon_0=0 +x_0=0 +y_0=0 +a=6371000 +b=6371000 +units=m +no_defs",{resolutions:[5e4,4e4,3e4,2e4,1e4,5e3,2500,1250]}),maxZoom:7,zoomSnap:.25}).fitBounds(H);o(e),setTimeout(()=>e.invalidateSize(),100)},[l]),r.a.createElement("div",{ref:l,className:"Map"},a&&r.a.createElement(T.Provider,{value:a},t))};var Y=I.GeoJSON.extend({options:{style:{color:"#333",weight:1},interval:20},initialize(e){A.a.Util.setOptions(this,e),this._layers={},this.options.sphere?this.addData(this._getFrame()):this.addData(this._getGraticule())},_getFrame(){return{type:"Polygon",coordinates:[this._getMeridian(-180).concat(this._getMeridian(180).reverse())]}},_getGraticule(){for(var e=[],t=this.options.interval,a=0;a<=180;a+=t)e.push(this._getFeature(this._getMeridian(a),{name:a?a.toString()+"\xb0 E":"Prime meridian"})),0!==a&&e.push(this._getFeature(this._getMeridian(-a),{name:a.toString()+"\xb0 W"}));for(var n=0;n<=90;n+=t)e.push(this._getFeature(this._getParallel(n),{name:n?n.toString()+"\xb0 N":"Equator"})),0!==n&&e.push(this._getFeature(this._getParallel(-n),{name:n.toString()+"\xb0 S"}));return{type:"FeatureCollection",features:e}},_getMeridian(e){e=this._lngFix(e);for(var t=[],a=-90;a<=90;a++)t.push([e,a]);return t},_getParallel(e){for(var t=[],a=-180;a<=180;a++)t.push([this._lngFix(a),e]);return t},_getFeature:(e,t)=>({type:"Feature",geometry:{type:"LineString",coordinates:e},properties:t}),_lngFix:e=>e>=180?179.999999:e<=-180?-179.999999:e});var R=()=>{const e=Object(n.useContext)(T);return Object(n.useEffect)(()=>{new Y({sphere:!0,style:{opacity:0,fillColor:"#edf7ff",fillOpacity:1,clickable:!1}}).addTo(e)},[e]),null};var z=e=>{let{country:t,letters:a="",setCategory:o,setCountry:l}=e;const c=Object(n.useCallback)(e=>{o(e),l(t.NAME)},[t,o,l]);return m.filter(e=>!e.legacy&&e.legend.find(e=>a.includes(e.code))).map(e=>{let{id:t,title:n,legend:o}=e;const{code:l,name:i}=o.find(e=>a.includes(e.code));return r.a.createElement("div",{className:"explore",key:l,onClick:()=>c(t)},o.length>1?r.a.createElement(r.a.Fragment,null,n,": ",i):i)})};var J=e=>{let{data:t}=e;const{title:a,body:n,imageurl:o,imagelink:l,youtubeid:c,readmorelink:i}=t;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",null,a),n&&r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}}),c?r.a.createElement("div",{className:"aspect-ratio"},r.a.createElement("iframe",{title:"YouTube video player",src:"https://www.youtube.com/embed/".concat(c),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})):o?r.a.createElement(r.a.Fragment,null,l?r.a.createElement("a",{href:l,rel:"noopener noreferrer",target:"_blank"},r.a.createElement("img",{src:o,alt:""})):r.a.createElement("img",{src:o,alt:""})):null,i&&r.a.createElement("p",null,r.a.createElement("a",{href:i,rel:"noopener noreferrer",target:"_blank"},"Learn more")))};const B=document.createElement("div");var G=e=>{var t;let{latlng:a,category:l,country:c,legend:i,setCountry:s,setCategory:u,onClose:d}=e;const m=Object(n.useContext)(T),g=Object(n.useContext)(j),f=null===g||void 0===g?void 0:g[p.includes(l)?"legacy":"current"],h=Object(n.useContext)(k),{CODE:y,NAME:E}=c,v=null===f||void 0===f?void 0:f.countries[y],b=i.find(e=>{var t;return null===h||void 0===h||null===(t=h[y])||void 0===t?void 0:t[e.code]}),C=null===(t=h[y])||void 0===t?void 0:t[null===b||void 0===b?void 0:b.code],O=v&&i.map(e=>({...e,year:f.years.find(t=>v[t]&&v[t].includes(e.code))})).filter(e=>e.year),S=Object(n.useCallback)(()=>document.body.classList.add("popupopen"),[]),x=Object(n.useCallback)(()=>{document.body.classList.remove("popupopen"),s(),d()},[s,d]);return Object(n.useEffect)(()=>{const{clientWidth:e,clientHeight:t}=m.getContainer(),n=e<400?e-100:300,r=t-100;Object(I.popup)({maxWidth:n,maxHeight:r}).setLatLng(a).setContent(B).openOn(m)},[m,a,l]),Object(n.useEffect)(()=>(m&&(m.on("popupopen",S),m.on("popupclose",x)),()=>{m&&(m.off("popupopen",S),m.off("popupclose",x))}),[m,S,x]),Object(o.createPortal)(r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,E),null===O||void 0===O?void 0:O.map(e=>{let{code:t,name:a,year:n}=e;return r.a.createElement("div",{key:t},"National"===a?"National scale since ":"Subnational"===a?"Using DHIS2 since ":r.a.createElement(r.a.Fragment,null,a,": Since "),n)}),(e=>"_"===e[0].code)(i)&&v?r.a.createElement(z,{country:c,letters:v[f.lastYear],data:f,setCountry:s,setCategory:u}):null,C?r.a.createElement(J,{data:C}):null),B)},V=a(82),U=a(80),q=a.n(U);const X=e=>{let{type:t,coordinates:a}=e,n=a;if("MultiPolygon"===t){const e=a.map(e=>Object(V.a)({type:"Polygon",coordinates:e}));n=a[e.indexOf(Math.max.apply(null,e))]}return q()(n,.1)};var $=e=>{let{layer:t,legend:a,onClick:r}=e;const o=Object(n.useContext)(T),l=Object(n.useContext)(k);return Object(n.useEffect)(()=>{if(o&&t&&a&&l){let e;const n=t.getLayers().filter(e=>{let{feature:t}=e;const n=t.properties.CODE;return l[n]&&a.some(e=>l[n][e.code])}).map(e=>{let{feature:t}=e;return{...t,geometry:{type:"Point",coordinates:X(t.geometry)}}});if(n.length){const t={icon:Object(I.icon)({iconUrl:"icon-info-48.png",iconSize:[20,20]})};return e=Object(I.geoJSON)(n,{pointToLayer:(e,a)=>Object(I.marker)(a,t)}).on("click",r),o.addLayer(e),()=>{e&&(e.off("click",r),o.removeLayer(e))}}}},[o,t,a,l,r]),null};var Z=e=>{let{category:t,selected:a,setCountry:o,setCategory:l}=e;const c=Object(n.useContext)(O),i=Object(n.useContext)(j),s=null===i||void 0===i?void 0:i[p.includes(t)?"legacy":"current"],u=Object(n.useContext)(T),[d,g]=Object(n.useState)(),[f,h]=Object(n.useState)(),[y,E]=Object(n.useState)(),v=Object(n.useMemo)(()=>m.find(e=>e.id===t).legend,[t]),b=Object(n.useCallback)(e=>{let{latlng:t,layer:a}=e;h(),E(t),h(a.feature.properties),o()},[o]);return Object(n.useEffect)(()=>{c&&g(Object(I.geoJSON)(c,{color:"#555",weight:1,fillColor:"#fff",fillOpacity:.75}).addTo(u))},[u,c]),Object(n.useEffect)(()=>{if(d&&v&&s){const{countries:e,lastYear:t}=s;d.eachLayer(e=>e.setStyle({fillColor:"#fff"})),d.eachLayer(a=>{const n=a.feature.properties.CODE;if(n&&e[n]&&e[n][t]){const r=e[n],o=r[t];a.feature.properties.NAME=r.name,v.forEach(e=>{let{code:t,color:n}=e;-1===o.indexOf(t)&&"_"!==t||a.setStyle({fillColor:n})})}})}},[d,v,s]),Object(n.useEffect)(()=>(d&&d.on("click",b),()=>{d&&d.off("click",b)}),[d,b]),Object(n.useEffect)(()=>{if(a){const e=d.getLayers().find(e=>e.feature.properties.NAME===a);e&&(E(X(e.feature.geometry).reverse()),h(e.feature.properties))}},[d,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement($,{layer:d,legend:v,onClick:b}),f?r.a.createElement(G,{category:t,country:f,latlng:y,legend:v,setCountry:o,setCategory:l,onClose:()=>h()}):null)},K=a(81);a(164);var Q=e=>{let{category:t,data:a,show:o}=e;const[l,c]=Object(n.useState)(),i=Object(n.useRef)();return Object(n.useEffect)(()=>{c(Object(K.chart)("chart",{chart:{type:"area",marginTop:4},title:{text:null},xAxis:{tickmarkPlacement:"on",title:{enabled:!1}},yAxis:{title:{text:"Countries using DHIS2"}},tooltip:{split:!0},plotOptions:{area:{stacking:"normal",lineColor:"#666666",lineWidth:1,marker:{lineWidth:1,lineColor:"#666666"}}},series:[],legend:{enabled:!1}}))},[i]),Object(n.useEffect)(()=>{if(a){const{series:e,xAxis:n,yAxis:r}=l,{title:o,legend:c}=m.find(e=>e.id===t),{years:i,year:s}=a;l.reflow();const u=i.slice(i.findIndex(e=>c.some(t=>{let{code:a}=t;return s[e][a]})));for(;e.length;)e[0].remove();n[0].setCategories(u),r[0].setTitle({text:"".concat(o," implementations")}),c.slice().reverse().forEach(e=>{let{code:t,name:a,color:n}=e;return l.addSeries({name:a,data:u.map(e=>s[e][t]),color:n})})}},[l,t,a]),Object(n.useEffect)(()=>{l&&o&&l.reflow()},[l,o]),r.a.createElement("div",{id:"chart",ref:i,className:"Chart Chart-".concat(o?"show":"hide")})};a(165);var ee=e=>{let{category:t,data:a,show:o,focus:l,onClick:c}=e;const i=Object(n.useRef)(),[s,u]=Object(n.useState)(null),d=Object(n.useMemo)(()=>m.find(e=>e.id===t).legend,[t]),g=Object(n.useMemo)(()=>{if(d&&a){const{countries:e,lastYear:t}=a;return u(null),d.map(a=>{let{code:n,name:r,color:o}=a;return{name:r,color:o,items:Object.values(e).filter(e=>{const a=e[t];return a&&("_"===n||-1!==a.indexOf(n))},[]).map(e=>e.name).sort(),focus:(l?Object.keys(e).filter(e=>l[e]&&l[e][n]):[]).map(t=>e[t].name)}})}},[d,a,l]),f=Object(n.useCallback)(()=>{if(g&&i.current){const{clientHeight:e}=i.current,t=Math.floor((e-70-20)/20),a=g.map(e=>{let{items:a}=e;return Math.ceil(a.length/t)});u(a)}},[i,g]);return Object(n.useEffect)(()=>(o&&(window.addEventListener("resize",f),f()),()=>window.removeEventListener("resize",f)),[o,f]),r.a.createElement("div",{id:"list",ref:i,className:"List List-".concat(o?"show":"hide")},r.a.createElement("div",{className:"container"},s&&g&&g.map((e,t)=>{let{name:a,color:n,items:o,focus:l}=e;const i=s[t];return r.a.createElement("div",{key:a,className:"section",style:{flexGrow:i,flexShrink:i}},r.a.createElement("h2",null,r.a.createElement("span",{style:{backgroundColor:n}}),a,": ",o.length),r.a.createElement("ul",{style:{columnCount:i}},o.map(e=>r.a.createElement("li",{key:e,onClick:()=>c(e)},e,l.includes(e)?r.a.createElement("img",{src:"icon-info-48.png",alt:"More information"}):""))))})))};a(166);var te=e=>{let{category:t,onClick:a}=e;const o=Object(n.useContext)(j),l=null===o||void 0===o?void 0:o[p.includes(t)?"legacy":"current"],c=Object(n.useContext)(k),[i,s]=Object(n.useState)(!0),{hasChart:u}=m.find(e=>e.id===t);return r.a.createElement("div",{className:"ChartList"},r.a.createElement("div",{className:"menu"},u&&r.a.createElement("div",{className:"toggle",onClick:()=>s(!i)},i?"View list of implementations":"View chart of adoption over time")),r.a.createElement("div",{className:"wrapper",style:{top:u?30:5}},r.a.createElement(Q,{category:t,data:l,show:u&&i}),r.a.createElement(ee,{category:t,data:l,show:!i||!u,focus:c,onClick:a})))};a(167);var ae=()=>{const[e,t]=Object(n.useState)((()=>{const{hash:e}=window.location;if(e){const t=e.substr(1);if(m.find(e=>e.id===t))return t}return"all"})()),[a,o]=Object(n.useState)();return Object(n.useEffect)(()=>{window.location.hash="#".concat(e)},[e]),r.a.createElement(s,null,r.a.createElement(S,null,r.a.createElement(x,null),r.a.createElement(M,{category:e,onSelect:t},r.a.createElement(W,null,r.a.createElement(R,null),r.a.createElement(Z,{category:e,selected:a,setCountry:o,setCategory:t})),r.a.createElement(te,{category:e,onClick:o}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},83:function(e,t,a){e.exports=a(169)}},[[83,1,2]]]);
//# sourceMappingURL=main.a15264fa.chunk.js.map